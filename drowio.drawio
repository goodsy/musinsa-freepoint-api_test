<?xml version="1.0" encoding="UTF-8"?>
<mxfile host="app.diagrams.net">
  <diagram name="ERD" id="1">
    <mxGraphModel dx="1000" dy="1000" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>
        <!-- api_log -->
        <mxCell id="api_log" value="api_log\n---------------------\nlog_id : VARCHAR(50) [PK]\napi_method : VARCHAR(10)\napi_uri : VARCHAR(128)\nidempotency_key : VARCHAR(128)\nrequest_headers : VARCHAR(500)\nrequest_body : CLOB\nresponse_body : CLOB\nstatus_code : VARCHAR(5)\ncreated_at : TIMESTAMP" style="shape=swimlane;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="40" width="260" height="220" as="geometry"/>
        </mxCell>
        <!-- point_policy_rule -->
        <mxCell id="point_policy_rule" value="point_policy_rule\n---------------------\nscope : VARCHAR(10) [PK]\nscope_id : VARCHAR(64) [PK]\npolicy_key : VARCHAR(50) [PK]\npolicy_value : BIGINT\ncreated_at : TIMESTAMP" style="shape=swimlane;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="340" y="40" width="260" height="160" as="geometry"/>
        </mxCell>
        <!-- point_wallet -->
        <mxCell id="point_wallet" value="point_wallet\n---------------------\nuser_id : VARCHAR(10) [PK]\ntotal_balance : BIGINT\nmanual_balance : BIGINT\ntotal_used : BIGINT\ntotal_canceled : BIGINT\ncreated_at : TIMESTAMP\nupdated_at : TIMESTAMP" style="shape=swimlane;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="300" width="260" height="200" as="geometry"/>
        </mxCell>
        <!-- point_accrual -->
        <mxCell id="point_accrual" value="point_accrual\n---------------------\npoint_key : VARCHAR(50) [PK]\nuser_id : VARCHAR(10)\namount : BIGINT\nremain_amount : BIGINT\nmanual : BOOLEAN\nsource_type : VARCHAR(20)\nsource_id : VARCHAR(100)\nexpires_at : TIMESTAMP\nstatus : VARCHAR(20)\ncreated_at : TIMESTAMP\nupdated_at : TIMESTAMP" style="shape=swimlane;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="340" y="300" width="300" height="260" as="geometry"/>
        </mxCell>
        <!-- point_usage -->
        <mxCell id="point_usage" value="point_usage\n---------------------\nusage_key : VARCHAR(50) [PK]\nuser_id : VARCHAR(10)\norder_no : VARCHAR(100)\namount : BIGINT\nused_at : TIMESTAMP\ncreated_at : TIMESTAMP\nupdated_at : TIMESTAMP\nreversal_of_id : BIGINT\nstatus : VARCHAR(20)" style="shape=swimlane;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="700" y="40" width="300" height="220" as="geometry"/>
        </mxCell>
        <!-- point_usage_detail -->
        <mxCell id="point_usage_detail" value="point_usage_detail\n---------------------\nusage_detail_key : VARCHAR(50) [PK]\nusage_key : BIGINT\npoint_key : VARCHAR(50)\namount : BIGINT\ncanceled_amount : BIGINT\nexpired : BOOLEAN" style="shape=swimlane;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="700" y="300" width="300" height="180" as="geometry"/>
        </mxCell>
        <!-- 관계선 -->
        <mxCell id="rel1" style="endArrow=block;endFill=1;html=1;" edge="1" parent="1" source="point_wallet" target="point_accrual">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="rel2" style="endArrow=block;endFill=1;html=1;" edge="1" parent="1" source="point_wallet" target="point_usage">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="rel3" style="endArrow=block;endFill=1;html=1;" edge="1" parent="1" source="point_accrual" target="point_usage_detail">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="rel4" style="endArrow=block;endFill=1;html=1;" edge="1" parent="1" source="point_usage" target="point_usage_detail">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
